<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Zigbee Module Examples: HAL/hal_fram.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Zigbee Module Examples
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d2c8373d15d2dccc509742e7e07c05d9.html">HAL</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">hal_fram.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>public methods for <a class="el" href="hal__fram_8c.html" title="Hardware Abstraction Layer (HAL) for the TI MSP-EXP430FR5739 and Anaren Zigbee BoosterPack.">hal_fram.c</a>  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;msp430fr5739.h&quot;</code><br/>
<code>#include &lt;stdint.h&gt;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3854f6185823066e200bd692320259ed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3854f6185823066e200bd692320259ed"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HAL_SLEEP</b>()&#160;&#160;&#160;( __bis_SR_register(LPM3_bits + GIE))</td></tr>
<tr class="memitem:a1dc0c20710eb83c3d3094f3f02ad9dcd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1dc0c20710eb83c3d3094f3f02ad9dcd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HAL_WAKEUP</b>()&#160;&#160;&#160;( __bic_SR_register_on_exit(LPM3_bits))</td></tr>
<tr class="memitem:af0c1f9519ebfcb2b7a449a5718dbb04a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af0c1f9519ebfcb2b7a449a5718dbb04a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HAL_ENABLE_INTERRUPTS</b>()&#160;&#160;&#160;(_EINT())</td></tr>
<tr class="memitem:ac50af31626b54361fdb47f4246dc8bc7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac50af31626b54361fdb47f4246dc8bc7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HAL_DISABLE_INTERRUPTS</b>()&#160;&#160;&#160;(_DINT())</td></tr>
<tr class="memitem:a5d574aa838ce213c3f3eb3c822e00ea8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5d574aa838ce213c3f3eb3c822e00ea8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RADIO_ON</b>()&#160;&#160;&#160;(P1OUT |= BIT0)</td></tr>
<tr class="memitem:a612764839e09572308223e5fcc645077"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a612764839e09572308223e5fcc645077"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RADIO_OFF</b>()&#160;&#160;&#160;(P1OUT &amp;= ~BIT0)</td></tr>
<tr class="memitem:a9e16f316b53194c43c9c0773eed28003"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9e16f316b53194c43c9c0773eed28003"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SS_SET</b>()&#160;&#160;&#160;(P1OUT &amp;= ~(BIT2 | BIT3))</td></tr>
<tr class="memitem:af432b5afd59b2ea8fa756fa50a386527"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af432b5afd59b2ea8fa756fa50a386527"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_SS_CLEAR</b>()&#160;&#160;&#160;(P1OUT |= (BIT2 | BIT3))</td></tr>
<tr class="memitem:a530440a8b692f42b583e08123bb62498"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a530440a8b692f42b583e08123bb62498"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SRDY_IS_HIGH</b>()&#160;&#160;&#160;(P2IN &amp; BIT4)</td></tr>
<tr class="memitem:a659f13a6e73aa38c44ae0f39e9da6da8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a659f13a6e73aa38c44ae0f39e9da6da8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SRDY_IS_LOW</b>()&#160;&#160;&#160;((~P2IN) &amp; BIT4)</td></tr>
<tr class="memitem:a3cad0f9b3c40159bd2fbd7f5e60f2fff"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3cad0f9b3c40159bd2fbd7f5e60f2fff"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>XTAL</b>&#160;&#160;&#160;8000000L</td></tr>
<tr class="memitem:a985d68afcc648a90f1910ca21b2f41c6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a985d68afcc648a90f1910ca21b2f41c6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TICKS_PER_MS</b>&#160;&#160;&#160;(XTAL / 1000)</td></tr>
<tr class="memitem:abb59a27da23cb826fe6a76e40f8ed3ec"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abb59a27da23cb826fe6a76e40f8ed3ec"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>VLO_NOMINAL</b>&#160;&#160;&#160;10000</td></tr>
<tr class="memitem:a7b9098e7e136eac1ca2c12661d294c23"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7b9098e7e136eac1ca2c12661d294c23"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>VLO_MIN</b>&#160;&#160;&#160;(VLO_NOMINAL - (VLO_NOMINAL/4))</td></tr>
<tr class="memitem:af4effe1de52d4c2e4b5573765eb49058"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af4effe1de52d4c2e4b5573765eb49058"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>VLO_MAX</b>&#160;&#160;&#160;(VLO_NOMINAL + (VLO_NOMINAL/4))</td></tr>
<tr class="memitem:a3641b8d2bb3a9ab7cf0ec3763c3d9be7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3641b8d2bb3a9ab7cf0ec3763c3d9be7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NUMBER_OF_LEDS</b>&#160;&#160;&#160;8</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abc6c00d8d65f1bed6f2ce307998dada0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__fram_8h.html#abc6c00d8d65f1bed6f2ce307998dada0">halInit</a> ()</td></tr>
<tr class="memitem:a82513b466ae394b673bc365537fe2146"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__fram_8h.html#a82513b466ae394b673bc365537fe2146">delayMs</a> (unsigned int ms)</td></tr>
<tr class="memitem:ac9351c2ff1896fb08ada2227fbb4563a"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__fram_8h.html#ac9351c2ff1896fb08ada2227fbb4563a">toggleLed</a> (unsigned char led)</td></tr>
<tr class="memitem:a9622c69d20253e0eeccadf816093e055"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__fram_8h.html#a9622c69d20253e0eeccadf816093e055">setLed</a> (unsigned char led)</td></tr>
<tr class="memitem:a5801a13917aa5f680d836b0543c4100b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__fram_8h.html#a5801a13917aa5f680d836b0543c4100b">clearLeds</a> ()</td></tr>
<tr class="memitem:a3d8659694ed715ee324a4d3ed39b36f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__fram_8h.html#a3d8659694ed715ee324a4d3ed39b36f8">halSpiInitModule</a> ()</td></tr>
<tr class="memitem:a8653a168989b0498a6bbfe865150d58c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__fram_8h.html#a8653a168989b0498a6bbfe865150d58c">spiWrite</a> (unsigned char *bytes, unsigned char numBytes)</td></tr>
<tr class="memitem:a36b1f5df38495d059d4e1c541879b8ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__fram_8h.html#a36b1f5df38495d059d4e1c541879b8ad">oscInit</a> ()</td></tr>
<tr class="memitem:affe619809b92fd0436ce33b1bb4bf853"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__fram_8h.html#affe619809b92fd0436ce33b1bb4bf853">getVcc3</a> ()</td></tr>
<tr class="memitem:a0bcdfa542b9eedd41663f2e335f5fc98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__fram_8h.html#a0bcdfa542b9eedd41663f2e335f5fc98">halSetAllPinsToInputs</a> (void)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>public methods for <a class="el" href="hal__fram_8c.html" title="Hardware Abstraction Layer (HAL) for the TI MSP-EXP430FR5739 and Anaren Zigbee BoosterPack.">hal_fram.c</a> </p>
<dl class="section rcs"><dt>Rev:</dt><dd>1765 </dd></dl>
<dl class="section rcs"><dt>Author:</dt><dd>dsmith </dd></dl>
<dl class="section rcs"><dt>Date:</dt><dd>2013-03-07 14:51:02 -0800 (Thu, 07 Mar 2013) </dd></dl>
<h1><a class="anchor" id="support"></a>
Support</h1>
<p>Please refer to the wiki at www.anaren.com/air-wiki-zigbee for more information. Additional support is available via email at the following addresses:</p>
<ul>
<li>Questions on how to use the product: <a href="#" onclick="location.href='mai'+'lto:'+'AIR'+'@a'+'nar'+'en'+'.co'+'m'; return false;">AIR@a<span style="display: none;">.nosp@m.</span>nare<span style="display: none;">.nosp@m.</span>n.com</a></li>
<li>Feature requests, comments, and improvements: <a href="#" onclick="location.href='mai'+'lto:'+'fea'+'tu'+'rer'+'eq'+'ues'+'ts'+'@te'+'sl'+'aco'+'nt'+'rol'+'s.'+'com'; return false;">featu<span style="display: none;">.nosp@m.</span>rere<span style="display: none;">.nosp@m.</span>quest<span style="display: none;">.nosp@m.</span>s@te<span style="display: none;">.nosp@m.</span>slaco<span style="display: none;">.nosp@m.</span>ntro<span style="display: none;">.nosp@m.</span>ls.co<span style="display: none;">.nosp@m.</span>m</a></li>
<li>Consulting engagements: <a href="#" onclick="location.href='mai'+'lto:'+'sal'+'es'+'@te'+'sl'+'aco'+'nt'+'rol'+'s.'+'com'; return false;">sales<span style="display: none;">.nosp@m.</span>@tes<span style="display: none;">.nosp@m.</span>lacon<span style="display: none;">.nosp@m.</span>trol<span style="display: none;">.nosp@m.</span>s.com</a></li>
</ul>
<h1><a class="anchor" id="license"></a>
License</h1>
<p>Copyright (c) 2012 Tesla Controls. All rights reserved. This Software may only be used with an Anaren A2530E24AZ1, A2530E24CZ1, A2530R24AZ1, or A2530R24CZ1 module. Redistribution and use in source and binary forms, with or without modification, are subject to the Software License Agreement in the file "anaren_eula.txt"</p>
<p>YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE, NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL ANAREN MICROWAVE OR TESLA CONTROLS BE LIABLE OR OBLIGATED UNDER CONTRACT, NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSE INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS. </p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a5801a13917aa5f680d836b0543c4100b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clearLeds </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Turns OFF LEDs. </p>
<dl class="section post"><dt>Postcondition:</dt><dd>LEDs are turned off.</dd></dl>
<p>Turns OFF the specified LED. Required for Module examples. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">led</td><td>the LED to turn off, must be 0,1,2,3,4. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>0 if success, -1 if invalid LED specified </dd></dl>

</div>
</div>
<a class="anchor" id="a82513b466ae394b673bc365537fe2146"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delayMs </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>delay</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A fairly accurate blocking delay for waits in the millisecond range. Good for 1mSec to 1000mSec. At 1MHz, error of zero for 100mSec or 1000mSec. For 10mSec, error of 100uSec. At 1mSec, error is 20uSec. At 8MHz, error of zero for 1000mSec. Note that accuracy will depend on the clock source. MSP430F2xx internal DCO is typically +/-1%. For better timing accuracy, use a timer, or a crystal. </p>
<dl class="section pre"><dt>Precondition:</dt><dd>TICKS_IN_ONE_MS is defined correctly </dd></dl>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">delay</td><td>number of milliseconds to delay </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="affe619809b92fd0436ce33b1bb4bf853"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t getVcc3 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the MSP430 supply voltage using the Analog to Digital Converter (ADC) and internal voltage reference. ADC clocked by ADC10OSC </p>
<dl class="section return"><dt>Returns:</dt><dd>Vcc supply voltage, in millivolts</dd></dl>
<p>Measures Vcc to the MSP430, nominally 3300mV on the MDB1</p>
<ul>
<li>ADC measures VCC/2 compared to 2.5V reference</li>
<li>If Vcc = 3.3V, ADC output should be (1.65/2.5)*4095 = 2703</li>
<li>(halfVcc/2.5)*4095 = ADC reading and (Vcc/2.5)*4095 = 2*ADC</li>
<li>Vcc*4096 = 5*ADC &ndash;&gt; and VCC=5*ADC/4095 <dl class="section return"><dt>Returns:</dt><dd>Vcc in millivolts</dd></dl>
Reads the MSP430 supply voltage using the Analog to Digital Converter (ADC). On MDB2, this is approx. 3600mV <dl class="section return"><dt>Returns:</dt><dd>Vcc supply voltage, in millivolts </dd></dl>
</li>
</ul>

</div>
</div>
<a class="anchor" id="abc6c00d8d65f1bed6f2ce307998dada0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halInit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures hardware for the particular hardware platform:</p>
<ul>
<li>Ports: sets direction, interrupts, pullup/pulldown resistors etc.</li>
<li>Holds radio in reset (active-low)</li>
</ul>
<dl class="section note"><dt>Note:</dt><dd>It takes five clock cycles after <a class="el" href="group__sysctl__api.html#ga2fbae61db465e1d861a62785d28e3ad6">SysCtlPeripheralEnable()</a> is called to enable a peripheral before the the peripheral is actually enabled. During this time, attempts to access the peripheral will result in a bus fault. Care should be taken to ensure that the peripheral is not accessed during this brief time period.</dd></dl>
<p>Configures hardware for the particular hardware platform:</p>
<ul>
<li>Ports: sets direction, interrupts, pullup/pulldown resistors etc.</li>
<li>Holds radio in reset (active-low)</li>
</ul>
<dl class="section post"><dt>Postcondition:</dt><dd>the board is configured for proper operation.</dd></dl>
<p>Configures hardware for the particular board</p>
<ul>
<li>Initializes clocks</li>
<li>Ports: including purpose, direction, pullup/pulldown resistors etc.</li>
<li>Holds radio in reset (active-low) </li>
</ul>

</div>
</div>
<a class="anchor" id="a0bcdfa542b9eedd41663f2e335f5fc98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halSetAllPinsToInputs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures all module interface signals as inputs to allow the module to be programmed. Toggles LED0 quickly to indicate application is running. </p>

</div>
</div>
<a class="anchor" id="a3d8659694ed715ee324a4d3ed39b36f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halSpiInitModule </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the Serial Peripheral Interface (SPI) interface to the Zigbee Module (ZM). </p>
<dl class="section note"><dt>Note:</dt><dd>Maximum module SPI clock speed is 4MHz. SPI port configured for clock polarity of 0, clock phase of 0, and MSB first. </dd>
<dd>
The Stellaris LaunchPad uses SSI2 to communicate with module </dd></dl>
<dl class="section pre"><dt>Precondition:</dt><dd>SPI pins configured correctly:<ul>
<li>Clock, MOSI, MISO configured as SPI function</li>
<li>Chip Select configured as an output</li>
<li>SRDY configured as an input. </li>
</ul>
</dd></dl>
<dl class="section post"><dt>Postcondition:</dt><dd>SPI port is configured for communications with the module.</dd></dl>
<p>Initializes the Serial Peripheral Interface (SPI) interface to the Zigbee Module (ZM). </p>
<dl class="section note"><dt>Note:</dt><dd>Maximum module SPI clock speed is 4MHz. SPI port configured for clock polarity of 0, clock phase of 0, and MSB first. </dd>
<dd>
On the FRAM board the MSP430 uses USCIB0 SPI port to communicate with the module. </dd></dl>
<dl class="section pre"><dt>Precondition:</dt><dd>SPI pins configured correctly:<ul>
<li>Clock, MOSI, MISO configured as SPI function</li>
<li>Chip Select configured as an output</li>
<li>SRDY configured as an input. </li>
</ul>
</dd></dl>
<dl class="section post"><dt>Postcondition:</dt><dd>SPI port is configured for communications with the module.</dd></dl>
<p>Initializes the Serial Peripheral Interface (SPI) interface to the Zigbee Module (ZM). </p>
<dl class="section note"><dt>Note:</dt><dd>Maximum module SPI clock speed is 4MHz. SPI port configured for clock polarity of 0, clock phase of 0, and MSB first. </dd>
<dd>
On the GW the Stellaris uses SSI0 to communicate with module </dd></dl>
<dl class="section pre"><dt>Precondition:</dt><dd>SPI pins configured correctly:<ul>
<li>Clock, MOSI, MISO configured as SPI function</li>
<li>Chip Select configured as an output</li>
<li>SRDY configured as an input. </li>
</ul>
</dd></dl>
<dl class="section post"><dt>Postcondition:</dt><dd>SPI port is configured for communications with the module.</dd></dl>
<p>Initializes the Serial Peripheral Interface (SPI) interface to the Zigbee Module (ZM). </p>
<dl class="section note"><dt>Note:</dt><dd>Maximum module SPI clock speed is 4MHz. SPI port configured for clock polarity of 0, clock phase of 0, and MSB first. </dd>
<dd>
On the MDB2 the MSP430 uses USCIB0 SPI port to communicate with the module. </dd></dl>
<dl class="section pre"><dt>Precondition:</dt><dd>SPI pins configured correctly:<ul>
<li>Clock, MOSI, MISO configured as SPI function</li>
<li>Chip Select configured as an output</li>
<li>SRDY configured as an input. </li>
</ul>
</dd></dl>
<dl class="section post"><dt>Postcondition:</dt><dd>SPI port is configured for communications with the module. </dd></dl>
<dl class="section note"><dt>Note:</dt><dd>this function is not required if using the UART to communicate with the module</dd></dl>
<p>Initializes the SPI interface to the Module. </p>
<dl class="section note"><dt>Note:</dt><dd>Module SPI clock speed &lt; 4MHz. SPI port configured for clock polarity of 0, clock phase of 0, and MSB first. </dd>
<dd>
On MDB the RFIC SPI port is USCIB1 </dd>
<dd>
Modify this method for other hardware implementations. </dd></dl>
<dl class="section pre"><dt>Precondition:</dt><dd>SPI pins configured correctly: Clock, MOSI, MISO configured as SPI function; Chip Select configured as an output; SRDY configured as an input. </dd></dl>
<dl class="section post"><dt>Postcondition:</dt><dd>SPI port is configured for RFIC communications.</dd></dl>
<p>Initializes the Serial Peripheral Interface (SPI) interface to the Zigbee Module (ZM). </p>
<dl class="section note"><dt>Note:</dt><dd>Maximum module SPI clock speed is 4MHz. SPI port configured for clock polarity of 0, clock phase of 0, and MSB first. </dd>
<dd>
On the MDB2 the MSP430 uses USCIB0 SPI port to communicate with the module. </dd></dl>
<dl class="section pre"><dt>Precondition:</dt><dd>SPI pins configured correctly:<ul>
<li>Clock, MOSI, MISO configured as SPI function</li>
<li>Chip Select configured as an output</li>
<li>SRDY configured as an input. </li>
</ul>
</dd></dl>
<dl class="section post"><dt>Postcondition:</dt><dd>SPI port is configured for communications with the module. </dd></dl>

</div>
</div>
<a class="anchor" id="a36b1f5df38495d059d4e1c541879b8ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oscInit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes Oscillator: configures MCLK to 25MHz using internal PLL (SYSCTL_USE_PLL) calibrated to 8MHz external crystal (SYSCTL_XTAL_8MHZ). </p>
<dl class="section note"><dt>Note:</dt><dd>PLL native frequency = 200MHz, so divide by 8 (SYSCTL_SYSDIV_8) to get 25MHz </dd>
<dd>
ADC requires either the PLL or a 16MHz clock source</dd></dl>
<p>Initializes Oscillator: turns off WDT, configures MCLK = 8MHz using internal DCO &amp; sets SMCLK = 4MHz. </p>
<dl class="section see"><dt>See also:</dt><dd>MSP430FR57xx_UCS_01.c</dd></dl>
<p>Initializes Oscillator: turns off WDT, configures MCLK to 25MHz using internal PLL</p>
<p>Initializes Oscillator: turns off WDT, configures MCLK to 8MHz using internal DCO and sets SMCLK to 4MHz</p>
<pre class="fragment">Initializes Oscillator
</pre><ul>
<li>turns off WDT</li>
<li>Configures MCLK to 8MHz using internal DCO</li>
<li>Sets SMCLK to 4MHz</li>
<li><p class="startli">Configures ACLK to use external xtal.</p>
<p class="startli">Initializes Oscillator: turns off WDT, configures MCLK = 8MHz using internal DCO &amp; sets SMCLK = 4MHz </p>
</li>
</ul>

</div>
</div>
<a class="anchor" id="a9622c69d20253e0eeccadf816093e055"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t setLed </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>led</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Turns ON the specified LED. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">led</td><td>the LED to turn on, must be 0,1,2,3,4. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>0 if success, -1 if invalid LED specified </dd></dl>

</div>
</div>
<a class="anchor" id="a8653a168989b0498a6bbfe865150d58c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiWrite </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>numBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends a message over SPI to the Module. SPI uses a "write-to-read" approach to read data out, you must write data in. This is a private method that gets wrapped by other methods, e.g. spiSreq(), spiPoll(), etc. To Write, set *bytes, numBytes. To Read, set *bytes only. Don't need to set numBytes because Module will stop when no more bytes read. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>the data to be sent or received. </td></tr>
    <tr><td class="paramname">numBytes</td><td>the number of bytes to be sent. This same buffer will be overwritten with the received data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note:</dt><dd>Modify this method for other hardware implementations. </dd></dl>
<dl class="section pre"><dt>Precondition:</dt><dd>SPI port configured for writing </dd>
<dd>
Module has been initialized </dd></dl>
<dl class="section post"><dt>Postcondition:</dt><dd>bytes contains received data, if any </dd></dl>
<dl class="section see"><dt>See also:</dt><dd>Stellaris Application Note spma002.pdf, "Adding 32kB of Serial SRAM to a Stellaris Microcontroller"</dd></dl>
<p>Sends a message over SPI to the Module on USCI_B1. SPI uses a "write-to-read" approach to read data out, you must write data in. This is a private method that gets wrapped by other methods, e.g. spiSreq(), spiPoll(), etc. To Write, set *bytes, numBytes. To Read, set *bytes only. Don't need to set numBytes because Module will stop when no more bytes read. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>the data to be sent or received. </td></tr>
    <tr><td class="paramname">numBytes</td><td>the number of bytes to be sent. This same buffer will be overwritten with the received data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note:</dt><dd>Modify this method for other hardware implementations. </dd></dl>
<dl class="section pre"><dt>Precondition:</dt><dd>SPI port configured for writing </dd>
<dd>
Module has been initialized </dd></dl>
<dl class="section post"><dt>Postcondition:</dt><dd>bytes contains received data, if any </dd></dl>
<dl class="section see"><dt>See also:</dt><dd>Stellaris Application Note spma002.pdf, "Adding 32kB of Serial SRAM to a Stellaris Microcontroller"</dd></dl>
<p>Used to communicate with Zigbee module </p>

</div>
</div>
<a class="anchor" id="ac9351c2ff1896fb08ada2227fbb4563a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t toggleLed </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>whichLed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Toggles the specified button LED. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">whichLed</td><td>the LED to toggle, must be 0-4. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section post"><dt>Postcondition:</dt><dd>The specified button LED is toggled. Status LED is unchanged. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>this should read from a globals file based on the type of device, how many LEDs, etc. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 20 2014 15:34:13 for Zigbee Module Examples by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
