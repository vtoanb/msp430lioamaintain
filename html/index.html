<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Zigbee Module Examples: Zigbee Module Examples</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Zigbee Module Examples
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Zigbee Module Examples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>READ ME FIRST </p>
<dl class="section author"><dt>Author:</dt><dd>Derek Smith</dd></dl>
<h1><a class="anchor" id="intro"></a>
Introduction</h1>
<p>The Zigbee Module allows you to easily create Zigbee applications without having to learn an intricate Zigbee stack. The module contains the Zigbee stack and interfacing is easy through the module library. This page is a general overview of the examples we've provided to interface with the Module. See documentation in each example .c file for more information. Methods are commented in the .c files. Header files list public (externally accessible) methods only.</p>
<h1><a class="anchor" id="license"></a>
License</h1>
<p>Copyright (c) 2013 Tesla Controls. All rights reserved. Redistribution and use in source and binary forms, with or without modification, are permitted only if used solely and exclusively with an Anaren A2530E24AZ1, A2530E24CZ1, A2530R24AZ1, or A2530R24CZ1 module. Refer to the file "anaren_eula.txt" for additional restrictions and limitations on this Software.</p>
<h1><a class="anchor" id="org"></a>
File Organization</h1>
<p>The examples make use of the module interface library. This abstraction layer allows you to focus on your application without having to worry about the details of the interface. This library relies on lower levels of abstraction to interface with the hardware. There are four layers of firmware provided:</p>
<ul>
<li>Examples: these run on the host microcontroller to demonstrate module functionality. Almost 30 different examples are included; everything from basic communications with the module to a complete Zigbee sensor application.</li>
<li>Module Driver: this is a lightweight wrapper library that runs on the host microcontroller and allows an application developer to code to an application programming interface (API) instead of worrying about bytes over the wire. This includes the files in the "ZM" directory like <a class="el" href="af_8c.html" title="Methods that implement the Application Framework (AF) interface.">af.c</a>, <a class="el" href="zdo_8c.html" title="Methods that implement the Zigbee Device Objects (ZDO) interface.">zdo.c</a>, <a class="el" href="simple__api_8c.html" title="Methods that implement the Simple Application Programming Interface (Simple API).">simple_api.c</a>, <a class="el" href="module_8c.html" title="Interface to the Zigbee Module.">module.c</a>, etc. NOTE: this driver library is not required (all the complicated processing is handled inside the module) but makes development much easier.</li>
<li>Physical Interface: This file (<a class="el" href="zm__phy__spi_8c.html" title="Physical Interface Layer to the Module using the Serial Peripheral Interface (SPI) port...">zm_phy_spi.c</a> if using SPI, zm_phy_uart if using UART) acts as thin layer between the drivers and the hall file, allowing you to use either interface without much changes.</li>
<li>Hardware Abstraction Layer (HAL): The HAL allows easy porting to different processors since only one file needs to be changed. We have developed HALs for the TI MSP430F2274, TI MSP430F248, and TI Stellaris processors. This also includes a utility to assist the user in porting to a different processor. - Module Firmware: this runs on the module and provides the Zigbee PRO interface and handles sending/receiving of data. It interfaces via SPI with a host processor and wraps the TI Z-Stack which has been used on millions of Zigbee devices.</li>
</ul>
<p>Below is the hierarchy of files: </p>
<table class="doxtable">
<tr>
<td colspan="6" align="center"><p class="starttd"><b> User Example (e.g. Simple Communications Example) </b> </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td colspan="2" align="center">Utilities  </td><td colspan="2" align="center">AF/ZDO Interface  </td><td colspan="2" align="center">SimpleAPI Interface   </td></tr>
<tr>
<td colspan="3" align="center">SPI PHY  </td><td colspan="3" align="center">UART PHY   </td></tr>
<tr>
<td colspan="6" align="center">Hardware Abstraction Layer (HAL)   </td></tr>
<tr>
<td colspan="6" align="center"><em>Low Level Hardware Registers / Module Firmware</em>   </td></tr>
</table>
<h1><a class="anchor" id="Examples"></a>
Examples</h1>
<p>The included examples demonstrate basic functionality to help the user get up and running quickly. There are four categories of examples: - Hardware Driver examples demonstrating basic I/O with the development board - Module Interface examples showing how to interface with the module - Communications examples showing many different ways to communicate data between two or more devices - A Sample Application showing how to use the module in a real application, with advanced fault-tolerance.</p>
<h2><a class="anchor" id="hw"></a>
Hardware Interface Examples</h2>
<p>The <a class="el" href="group__hw_examples.html">Hardware Interface Examples</a> contain basic hardware examples for the board. Start here, and compile, load, and run through each example. The recommended order is:</p>
<ul>
<li><a class="el" href="example__button__interrupt_8c.html" title="Toggles LED0 when button pressed.">example_button_interrupt.c</a></li>
<li><a class="el" href="example__hello__world_8c.html" title="Outputs &quot;Hello World&quot; to console and toggles LED approximately once per second.">example_hello_world.c</a></li>
<li><a class="el" href="example__timer__interrupt_8c.html" title="Uses the microcontroller&#39;s internal oscillator to configure a timer to wake up periodically. Toggles LED0 when an interrupt is generated from the timer. Otherwise sleeps.">example_timer_interrupt.c</a></li>
<li><a class="el" href="example__read__supply__voltage_8c.html" title="Uses the ADC to measure the supply voltage and toggles LED1 approximately once per second...">example_read_supply_voltage.c</a></li>
</ul>
<p>If you would like to learn more about the peripherals on the BoosterPack, see:</p>
<ul>
<li><a class="el" href="example__read__color__sensor_8c.html" title="Uses the MSP430&#39;s I2C interface to read the external color sensor.">example_read_color_sensor.c</a></li>
<li><a class="el" href="example__read__eeprom_8c.html" title="reads and writes the EEPROM">example_read_eeprom.c</a></li>
<li><a class="el" href="example__read___i_r__temperature__sensor_8c.html" title="Uses the I2C interface to read the external IR temperature sensor.">example_read_IR_temperature_sensor.c</a></li>
</ul>
<h2><a class="anchor" id="iface"></a>
Module Interface</h2>
<p>The <a class="el" href="group__module_interface.html">Module Interface Examples</a> contains basic hardware examples for the board. Once you have completed a few of the Hardware Interface Examples run through each of these examples. The recommended order is:</p>
<ul>
<li><a class="el" href="example__reset__module_8c.html" title="Resets Module, parses message received and displays to console.">example_reset_module.c</a></li>
<li><a class="el" href="example__get__mac__address_8c.html" title="Resets Module, gets MAC Address.">example_get_mac_address.c</a></li>
<li><a class="el" href="example__get__version_8c.html" title="Resets Radio, gets module version information using SYS_VERSION command and displays it...">example_get_version.c</a></li>
</ul>
<p>If you would like to learn more about the module features, see:</p>
<ul>
<li><a class="el" href="example__measure__module__current_8c.html" title="Simple utility to demonstrate how to measure module current using onboard current sense amplifier...">example_measure_module_current.c</a></li>
<li><a class="el" href="example__get__random_8c.html" title="Resets Radio, gets a random number using SYS_RANDOM command and displays it.">example_get_random.c</a></li>
<li><a class="el" href="example__read__nonvolatile__memory_8c.html" title="Resets Module, reads out the contents of all user non-volatile (NV) items and displays to console...">example_read_nonvolatile_memory.c</a></li>
<li><a class="el" href="example__write__nonvolatile__memory_8c.html" title="Resets Module, prompts the user for which NV item to write (1-6) and writes test data to that locatio...">example_write_nonvolatile_memory.c</a></li>
<li><a class="el" href="example__read__digital__io_8c.html" title="Resets Module, configures all four of the GPIO pins as inputs with pullups, then reads out the value ...">example_read_digital_io.c</a></li>
<li><a class="el" href="example__write__digital__io_8c.html" title="Resets Module, configures all four of the GPIO pins as outputs, then toggles the GPIO pins once per s...">example_write_digital_io.c</a></li>
<li><a class="el" href="example__rf__tester_8c.html" title="Simple utility to configure the Module to output an RF test signal.">example_rf_tester.c</a></li>
</ul>
<h2><a class="anchor" id="comms"></a>
Communications</h2>
<p>The <a class="el" href="group__module_communications.html">Basic Communications Examples</a> demonstrate how to communicate over Zigbee using the Module. For these examples you will need two devices, one to make the coordinator and one to make the other device (end-device or router). To get up and running, run the example_basic_comms_coordinator_afzdo.c on one device and then example_basic_comms_router_afzdo.c on a second device. Once you get these examples working, load a third device with example_basic_comms_end_device_afzdo.c and you can see how a basic network works. Additional examples include:</p>
<ul>
<li><a class="el" href="example__basic__comms__coordinator__sapi_8c.html" title="Resets Module, configures this device to be a Zigbee Coordinator, and displays any messages that are ...">example_basic_comms_coordinator_sapi.c</a></li>
<li><a class="el" href="example__basic__comms__router__sapi_8c.html" title="Resets Radio, configures this device to be a Zigbee Router, joins a network, then sends a message to ...">example_basic_comms_router_sapi.c</a></li>
</ul>
<p>For experimenting with the module's handling of large messages, see:</p>
<ul>
<li><a class="el" href="example__fragmentation__coordinator__afzdo_8c.html" title="Resets Module, configures this device to be a Zigbee Coordinator, and displays any messages that are ...">example_fragmentation_coordinator_afzdo.c</a></li>
<li><a class="el" href="example__fragmentation__router__afzdo_8c.html" title="Resets Module, configures this device to be a Zigbee Router, joins a network, then sends an extended ...">example_fragmentation_router_afzdo.c</a></li>
</ul>
<p>Finally, to test the module's security features, see:</p>
<ul>
<li><a class="el" href="example__secure__comms__coordinator__afzdo_8c.html" title="Resets Radio, configures this device to be a Zigbee Coordinator, and displays any received messages...">example_secure_comms_coordinator_afzdo.c</a></li>
<li><a class="el" href="example__secure__comms__router__afzdo_8c.html" title="Resets Radio, configures this device to be a Zigbee Router, joins a network, initializes security and...">example_secure_comms_router_afzdo.c</a></li>
</ul>
<h2><a class="anchor" id="apps"></a>
Simple Applications</h2>
<p>The <a class="el" href="index.html#apps">Simple Application Examples</a> demonstrates a simple sensor application. These are designed to help you get up and running quickly. Note: you should run and be familiar with the previous examples before using these. The recommended order is:</p>
<ul>
<li><a class="el" href="example__simple__application__coordinator__afzdo_8c.html" title="Resets Module, configures this device to be a Zigbee Coordinator, and displays any messages that are ...">example_simple_application_coordinator_afzdo.c</a></li>
<li><a class="el" href="example__simple__application__router__afzdo_8c.html" title="Resets Module, configures this device to be a Zigbee Router, joins a network, then sends a message to...">example_simple_application_router_afzdo.c</a></li>
<li><a class="el" href="example__simple__application__end__device__afzdo_8c.html" title="Resets Module, configures this device to be a Zigbee End Device, joins a network, then sends a messag...">example_simple_application_end_device_afzdo.c</a></li>
</ul>
<p>In this group is the <a class="el" href="example__network__explorer_8c.html" title="Allows the user to configure this device as either a Coordinator, Router, or End device and explore v...">example_network_explorer.c</a> utility that uses a command line interface to send/receive messages.</p>
<h1><a class="anchor" id="iface"></a>
Module Interface</h1>
<p>The Zigbee Module (ZM) allows you to easily create Zigbee applications with the included interface. There are two interfaces to the Module: the Simple API and the Application Framework / Zigbee Device Objects (AFZDO). Simple API is a little easier, as it is only ~10 methods to learn, but AFZDO is more powerful. Most examples are written using the AFZDO interface.</p>
<p>This directory includes the drivers to the module, including:</p>
<h2><a class="anchor" id="sys"></a>
System Interface</h2>
<p>These are the generic Module configuration methods and can be used with Simple API or AFZDO.</p>
<ul>
<li><a class="el" href="module__commands_8h.html" title="Simple definitions of Module commands.">module_commands.h</a>: contains all the commands used.</li>
<li><a class="el" href="module_8c.html" title="Interface to the Zigbee Module.">module.c</a>: This is the bulk of the interface, for configuring and using the module.</li>
</ul>
<h2><a class="anchor" id="api"></a>
Application Programming Interface</h2>
<p>This enables your application to send/receive data using the Module. Use either Simple API or AFZDO. The are compatible, but once you've started your application with Simple API then you should only use SimpleAPI commands to send receive data.</p>
<ul>
<li><a class="el" href="simple__api_8c.html" title="Methods that implement the Simple Application Programming Interface (Simple API).">simple_api.c</a>: Implements the Simple API</li>
<li><a class="el" href="af_8c.html" title="Methods that implement the Application Framework (AF) interface.">af.c</a>: Implements the Application Framework interface</li>
<li><a class="el" href="zdo_8c.html" title="Methods that implement the Zigbee Device Objects (ZDO) interface.">zdo.c</a>: Implements the Zigbee Device Objects interface</li>
<li><a class="el" href="application__configuration_8c.html" title="Contains Zigbee Application Configuration methods.">application_configuration.c</a>: used by both interfaces for advanced configuration of module behavior</li>
</ul>
<h2><a class="anchor" id="zmhw"></a>
Zigbee Module Hardware Interface</h2>
<p>This has been separated out from the main files to allow you to switch between SPI or UART whilst keeping the rest of the files the same.</p>
<ul>
<li><a class="el" href="zm__phy_8h.html" title="Zigbee Module physical interface (Phy) layer select file.">zm_phy.h</a>: This will load the appropriate physical interface file based on the compile options.</li>
<li><a class="el" href="zm__phy__spi_8c.html" title="Physical Interface Layer to the Module using the Serial Peripheral Interface (SPI) port...">zm_phy_spi.c</a>: SPI interface</li>
<li><a class="el" href="zm__phy__uart_8c.html" title="Physical Interface Layer to the Module using the Universal Asynchronous Receiver/Transmitter interfac...">zm_phy_uart.c</a>: UART interface</li>
</ul>
<h2><a class="anchor" id="utils"></a>
Miscellaneous Zigbee Module Utilities</h2>
<p>Methods or defines used by one or more of the previous files.</p>
<ul>
<li><a class="el" href="module__errors_8h.html" title="Simple definitions of Module error codes returned in all methods that return moduleResult_t.">module_errors.h</a>: describes the error handling system and how to use it.</li>
<li><a class="el" href="module__errors_8c.html" title="Module error handling. In one file here to make it easy to include wherever the module is used...">module_errors.c</a>: defines the error codes used, and a simple utility for checking the return status.</li>
<li><a class="el" href="module__utilities_8c.html" title="Simple utilities for interfacing with the Module.">module_utilities.c</a>: various utilities used for working with the module</li>
</ul>
<h1><a class="anchor" id="changing"></a>
Changing Hardware Platforms</h1>
<p>The Hardware Abstraction Layer (HAL) provides an easy way to port the Zigbee Module library and examples to other hardware environments.</p>
<p>Prior to changing hardware platforms, it is recommended:</p>
<ul>
<li>You have already compiled and ran all the module examples on one of the supported platforms (MSP430 Launchpad, Stellaris LaunchPad, etc.) and you are familiar with how the library is structured.</li>
<li>You have extensive programming experience with your desired hardware environment</li>
<li>You have sufficient time. Porting HAL to a new processor (e.g. Stellaris ARM) took approximately 3 days</li>
</ul>
<p>To change hardware platforms, the following steps are recommended:</p>
<ul>
<li>Copy the hal files (e.g. <a class="el" href="hal__launchpad_8c.html" title="Hardware Abstraction Layer (HAL) for the TI LaunchPad and Anaren Zigbee BoosterPack.">hal_launchpad.c</a> and <a class="el" href="hal__launchpad_8h.html" title="public methods for hal_launchpad.c">hal_launchpad.h</a>) that you wish to use as a starting point and save them with the name of your platform, for example "hal_gw0.c".</li>
<li>Define a project property with the name of your environment (e.g. GW0)</li>
<li>In <a class="el" href="hal_8h.html" title="Hardware Abstraction Layer (HAL) file.">hal.h</a> add an option for your environment</li>
<li>Modify your new hal file for your hardware platform.</li>
</ul>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="hal__helper_8c.html" title="Utilities to assist changing hardware platforms.">hal_helper.c</a> for methods to assist in changing hardware platforms.</dd></dl>
<dl class="section note"><dt>Note:</dt><dd>Projects compiled with IAR Embedded Workbench for IAR version 5.30 </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 22 2014 11:10:35 for Zigbee Module Examples by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
